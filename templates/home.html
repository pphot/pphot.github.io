<!doctype html>
<html lang="{{ priority .Page.Config.lang .Section.Config.lang .Site.Config.lang }}">
    {{ template "partials/_head.html" . }}
    <body class="homepage">
        <a href="#main" class="skip-to-content">{{ .Site.Config.extra.skip_to_content }}</a>

        {{ template "partials/_header.html" . }}

        <div class="reading-progress" id="reading-progress"></div>

        <main id="main">
            <!-- Hero Section -->
            <section class="hero">
                <div class="hero-image">
                    <img
                        src="{{ .Site.Config.extra.hero_image }}"
                        alt="{{ .Site.Config.extra.home_hero_alt }}"
                        width="1920"
                        height="1080"
                        loading="eager"
                        fetchpriority="high"
                        class="img-cover"
                    />
                </div>
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <h1 class="hero-title">{{ .Site.Config.title }}</h1>
                    <p class="hero-subtitle">{{ .Site.Config.extra.bio }}</p>
                </div>
            </section>

            <!-- Welcome Section -->
            <section class="welcome">
                <img
                    src="{{ .Site.Config.extra.avatar }}"
                    alt="{{ .Site.Config.extra.name }}"
                    class="welcome-avatar"
                    width="120"
                    height="120"
                    loading="lazy"
                />
                <h2>{{ .Site.Config.extra.home_welcome_prefix }} {{ .Config.extra.name }}</h2>
                <div>{{ .Page.Content }}</div>
            </section>

            {{ $journal := get_section "journal" }} {{ $books := get_section "books" }} {{ $thoughts
            := get_section "thoughts" }} {{ $has_featured := false }} {{ range $journal.Children
            }}{{ if .Config.extra.featured }}{{ $has_featured = true }}{{ end }}{{ end }} {{ range
            $books.Children }}{{ if .Config.extra.featured }}{{ $has_featured = true }}{{ end }}{{
            end }} {{ range $thoughts.Children }}{{ if .Config.extra.featured }}{{ $has_featured =
            true }}{{ end }}{{ end }} {{ if $has_featured }}
            <section class="section-featured">
                <div class="section-header">
                    <h2>{{ .Site.Config.extra.home_featured_title }}</h2>
                    <p class="section-subtitle">{{ .Site.Config.extra.home_featured_subtitle }}</p>
                </div>

                <div class="post-grid">
                    {{ $count := 0 }} {{ range $journal.Children }} {{ if and
                    .Config.extra.featured (lt $count 6) }} {{ $count = add $count 1 }}
                    <article class="post-card fade-in">
                        {{ $post_image := "/img/post-cover.webp" }} {{ if .Config.extra.img }} {{
                        $img_path := .Config.extra.img }} {{ $first_char := index (split $img_path
                        "") 0 }} {{ if eq $first_char "/" }} {{ $post_image = $img_path }} {{ else
                        }} {{ $post_image = printf "%s%s" .Permalink $img_path }} {{ end }} {{ end
                        }}

                        <a href="{{ .Permalink }}" class="post-card-image">
                            <img
                                src="{{ $post_image }}"
                                alt="{{ .Config.title }}"
                                width="400"
                                height="250"
                                loading="lazy"
                                decoding="async"
                                onerror="this.src='/img/post-cover.webp'"
                            />
                        </a>

                        <div class="post-card-content">
                            <div class="post-card-meta">{{ if .Config.categories }}{{ $first_category := index .Config.categories 0 }}{{ $category_icon := "" }}{{ if eq $first_category "books" }}{{ $category_icon = "ðŸ“š" }}{{ else if eq $first_category "journal" }}{{ $category_icon = "ðŸ“”" }}{{ else if eq $first_category "thoughts" }}{{ $category_icon = "ðŸ’­" }}{{ end }}<span class="post-category">{{ $category_icon }} {{ $first_category }}</span>{{ end }}<time class="post-date" datetime="{{ .Config.date }}">{{ date .Config.date "Jan 2, 2006" }}</time></div>
                            <h3 class="post-title">
                                <a href="{{ .Permalink }}">{{ .Config.title }}</a>
                            </h3>
                            {{ $summary := .Summary }} {{ if $summary }}
                            <p class="post-description">{{ $summary }}</p>
                            {{ end }}
                            <div class="post-tags">
                                {{ range .Config.tags }}
                                <span class="post-tag">#{{ . }}</span>
                                {{ end }}
                            </div>
                        </div>
                    </article>
                    {{ end }} {{ end }} {{ range $books.Children }} {{ if and
                    .Config.extra.featured (lt $count 6) }} {{ $count = add $count 1 }}
                    <article class="post-card fade-in">
                        {{ $post_image := "/img/post-cover.webp" }} {{ if .Config.extra.img }} {{
                        $img_path := .Config.extra.img }} {{ $first_char := index (split $img_path
                        "") 0 }} {{ if eq $first_char "/" }} {{ $post_image = $img_path }} {{ else
                        }} {{ $post_image = printf "%s%s" .Permalink $img_path }} {{ end }} {{ end
                        }}

                        <a href="{{ .Permalink }}" class="post-card-image">
                            <img
                                src="{{ $post_image }}"
                                alt="{{ .Config.title }}"
                                width="400"
                                height="250"
                                loading="lazy"
                                decoding="async"
                                onerror="this.src='/img/post-cover.webp'"
                            />
                        </a>

                        <div class="post-card-content">
                            <div class="post-card-meta">{{ if .Config.categories }}{{ $first_category := index .Config.categories 0 }}{{ $category_icon := "" }}{{ if eq $first_category "books" }}{{ $category_icon = "ðŸ“š" }}{{ else if eq $first_category "journal" }}{{ $category_icon = "ðŸ“”" }}{{ else if eq $first_category "thoughts" }}{{ $category_icon = "ðŸ’­" }}{{ end }}<span class="post-category">{{ $category_icon }} {{ $first_category }}</span>{{ end }}<time class="post-date" datetime="{{ .Config.date }}">{{ date .Config.date "Jan 2, 2006" }}</time></div>
                            <h3 class="post-title">
                                <a href="{{ .Permalink }}">{{ .Config.title }}</a>
                            </h3>
                            {{ $summary := .Summary }} {{ if $summary }}
                            <p class="post-description">{{ $summary }}</p>
                            {{ end }}
                            <div class="post-tags">
                                {{ range .Config.tags }}
                                <span class="post-tag">#{{ . }}</span>
                                {{ end }}
                            </div>
                        </div>
                    </article>
                    {{ end }} {{ end }} {{ range $thoughts.Children }} {{ if and
                    .Config.extra.featured (lt $count 6) }} {{ $count = add $count 1 }}
                    <article class="post-card fade-in">
                        {{ $post_image := "/img/post-cover.webp" }} {{ if .Config.extra.img }} {{
                        $img_path := .Config.extra.img }} {{ $first_char := index (split $img_path
                        "") 0 }} {{ if eq $first_char "/" }} {{ $post_image = $img_path }} {{ else
                        }} {{ $post_image = printf "%s%s" .Permalink $img_path }} {{ end }} {{ end
                        }}

                        <a href="{{ .Permalink }}" class="post-card-image">
                            <img
                                src="{{ $post_image }}"
                                alt="{{ .Config.title }}"
                                width="400"
                                height="250"
                                loading="lazy"
                                decoding="async"
                                onerror="this.src='/img/post-cover.webp'"
                            />
                        </a>

                        <div class="post-card-content">
                            <div class="post-card-meta">{{ if .Config.categories }}{{ $first_category := index .Config.categories 0 }}{{ $category_icon := "" }}{{ if eq $first_category "books" }}{{ $category_icon = "ðŸ“š" }}{{ else if eq $first_category "journal" }}{{ $category_icon = "ðŸ“”" }}{{ else if eq $first_category "thoughts" }}{{ $category_icon = "ðŸ’­" }}{{ end }}<span class="post-category">{{ $category_icon }} {{ $first_category }}</span>{{ end }}<time class="post-date" datetime="{{ .Config.date }}">{{ date .Config.date "Jan 2, 2006" }}</time></div>
                            <h3 class="post-title">
                                <a href="{{ .Permalink }}">{{ .Config.title }}</a>
                            </h3>
                            {{ $summary := .Summary }} {{ if $summary }}
                            <p class="post-description">{{ $summary }}</p>
                            {{ end }}
                            <div class="post-tags">
                                {{ range .Config.tags }}
                                <span class="post-tag">#{{ . }}</span>
                                {{ end }}
                            </div>
                        </div>
                    </article>
                    {{ end }} {{ end }}
                </div>
            </section>
            {{ end }}

            <section class="section-latest">
                <div class="section-header">
                    <h2>{{ .Site.Config.extra.home_latest_title }}</h2>
                    <p class="section-subtitle">{{ .Site.Config.extra.home_latest_subtitle }}</p>
                </div>

                <div class="post-grid">
                    {{ $latest_count := 0 }} {{ range $journal.Children }} {{ if lt
                    $latest_count 3 }} {{ $latest_count = add $latest_count 1 }}
                    <article class="post-card fade-in">
                        {{ $post_image := "/img/post-cover.webp" }} {{ if .Config.extra.img }} {{
                        $img_path := .Config.extra.img }} {{ $first_char := index (split $img_path
                        "") 0 }} {{ if eq $first_char "/" }} {{ $post_image = $img_path }} {{ else
                        }} {{ $post_image = printf "%s%s" .Permalink $img_path }} {{ end }} {{ end
                        }}

                        <a href="{{ .Permalink }}" class="post-card-image">
                            <img
                                src="{{ $post_image }}"
                                alt="{{ .Config.title }}"
                                width="400"
                                height="250"
                                loading="lazy"
                                decoding="async"
                                onerror="this.src='/img/post-cover.webp'"
                            />
                        </a>

                        <div class="post-card-content">
                            <div class="post-card-meta">{{ if .Config.categories }}{{ $first_category := index .Config.categories 0 }}{{ $category_icon := "" }}{{ if eq $first_category "books" }}{{ $category_icon = "ðŸ“š" }}{{ else if eq $first_category "journal" }}{{ $category_icon = "ðŸ“”" }}{{ else if eq $first_category "thoughts" }}{{ $category_icon = "ðŸ’­" }}{{ end }}<span class="post-category">{{ $category_icon }} {{ $first_category }}</span>{{ end }}<time class="post-date" datetime="{{ .Config.date }}">{{ date .Config.date "Jan 2, 2006" }}</time></div>
                            <h3 class="post-title">
                                <a href="{{ .Permalink }}">{{ .Config.title }}</a>
                            </h3>
                            {{ $summary := .Summary }} {{ if $summary }}
                            <p class="post-description">{{ $summary }}</p>
                            {{ end }}
                            <div class="post-tags">
                                {{ range .Config.tags }}
                                <span class="post-tag">#{{ . }}</span>
                                {{ end }}
                            </div>
                        </div>
                    </article>
                    {{ end }} {{ end }} {{ range $books.Children }} {{ if lt $latest_count
                    6 }} {{ $latest_count = add $latest_count 1 }}
                    <article class="post-card fade-in">
                        {{ $post_image := "/img/post-cover.webp" }} {{ if .Config.extra.img }} {{
                        $img_path := .Config.extra.img }} {{ $first_char := index (split $img_path
                        "") 0 }} {{ if eq $first_char "/" }} {{ $post_image = $img_path }} {{ else
                        }} {{ $post_image = printf "%s%s" .Permalink $img_path }} {{ end }} {{ end
                        }}

                        <a href="{{ .Permalink }}" class="post-card-image">
                            <img
                                src="{{ $post_image }}"
                                alt="{{ .Config.title }}"
                                width="400"
                                height="250"
                                loading="lazy"
                                decoding="async"
                                onerror="this.src='/img/post-cover.webp'"
                            />
                        </a>

                        <div class="post-card-content">
                            <div class="post-card-meta">{{ if .Config.categories }}{{ $first_category := index .Config.categories 0 }}{{ $category_icon := "" }}{{ if eq $first_category "books" }}{{ $category_icon = "ðŸ“š" }}{{ else if eq $first_category "journal" }}{{ $category_icon = "ðŸ“”" }}{{ else if eq $first_category "thoughts" }}{{ $category_icon = "ðŸ’­" }}{{ end }}<span class="post-category">{{ $category_icon }} {{ $first_category }}</span>{{ end }}<time class="post-date" datetime="{{ .Config.date }}">{{ date .Config.date "Jan 2, 2006" }}</time></div>
                            <h3 class="post-title">
                                <a href="{{ .Permalink }}">{{ .Config.title }}</a>
                            </h3>
                            {{ $summary := .Summary }} {{ if $summary }}
                            <p class="post-description">{{ $summary }}</p>
                            {{ end }}
                            <div class="post-tags">
                                {{ range .Config.tags }}
                                <span class="post-tag">#{{ . }}</span>
                                {{ end }}
                            </div>
                        </div>
                    </article>
                    {{ end }} {{ end }}
                </div>
            </section>

            <!-- Category Navigation Section -->
            <section class="category-navigation">
                <div class="category-grid">
                    <a href="/journal" class="category-card">
                        <div class="category-icon">ðŸ“”</div>
                        <h3 class="category-name">Journal</h3>
                        <p class="category-description">Daily reflections, travel stories, and personal moments</p>
                        <span class="category-link">View all journal entries â†’</span>
                    </a>

                    <a href="/books" class="category-card">
                        <div class="category-icon">ðŸ“š</div>
                        <h3 class="category-name">Books</h3>
                        <p class="category-description">Reviews and thoughts on books that touched my heart</p>
                        <span class="category-link">View all book reviews â†’</span>
                    </a>

                    <a href="/thoughts" class="category-card">
                        <div class="category-icon">ðŸ’­</div>
                        <h3 class="category-name">Thoughts</h3>
                        <p class="category-description">Quick reflections and fleeting observations</p>
                        <span class="category-link">View all thoughts â†’</span>
                    </a>
                </div>
            </section>
        </main>

        {{ template "partials/_footer.html" . }}

        <script src="/js/main.js"></script>
    </body>
</html>
